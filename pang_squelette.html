<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Pang</title>
    <script>

    var context = null;

    // plateforme dans le jeu :
    var rectangle = { x: 0, y: 0, width: 0, height:0, vertical: true, exist:true };
	
	var platform = [];
	const PLATFORM_SIZE = 40;
	var numLevel = 1;

	// dernière mise à jour
    var lastUpdate = 0;
	
	
    // initialisation (appelée au chargement du corps du document <body onload="init">)
    init = function() {
        // instanciation de la variable globale contenant le contexte
        context = document.getElementById("cvs").getContext("2d");
        context.width = document.getElementById("cvs").width;
        context.height = document.getElementById("cvs").height;

        // on associe au document des écouteurs d'événements
        // --> voir http://www.w3schools.com/js/js_events.asp

        // 2 écouteurs pour le clavier (appui/relâchement d'une touche)
        document.addEventListener("keydown", captureAppuiToucheClavier);
        document.addEventListener("keyup", captureRelacheToucheClavier);

		//Creation des plateformes horizontale
		
		switch(numLevel){
			case 1 :{
				for (var i=0; i < 4; i++) {
					platform[i] = {
									x: Math.floor(context.width-(i+1)*150-75),
				      				y: Math.floor(context.height/2-100),				
				        			width: PLATFORM_SIZE*2,
				        			height: PLATFORM_SIZE,
									vertical: false,
                                    exist: true
                    };  
				}
			break;
			}
        }

        // lancement de la boucle de jeu
        boucleDeJeu();
    }


    boucleDeJeu = function() {
        // mise à jour de l'état du jeu
        update(Date.now());
        // affichage de l'état du jeu
        render();
        // rappel de la boucle de jeu
        // requestAnimationFrame est une fonction JS servant à pré-calculer le prochain affichage
        //  http://www.html5canvastutorials.com/advanced/html5-canvas-animation-stage/
        requestAnimationFrame(boucleDeJeu);
    }


    /**
     *  Mise à jour de l'état du jeu
     *  @param  d   date courante
     */
    update = function(d) {
		var delta = d - lastUpdate;
        lastUpdate = d;
    }


    /**
     *  Fonction réalisant le rendu de l'état du jeu
     */
    render = function() {
        // effacement de l'écran
        context.clearRect(0, 0, context.width, context.height);
	
		// dessin des obstacles
        context.fillStyle="black";
        for (var i=0; i < platform.length; i++) {
        	context.fillRect(platform[i].x, platform[i].y, platform[i].width, platform [i].height);
        }
    }



    /**
     *  Fonction appelée lorsqu'une touche du clavier est appuyée
     *  Associée à l'événement "keyDown"
     */
    captureAppuiToucheClavier = function(event) {
        // pratique pour connaître les keyCode des touches du clavier :
        //  --> http://www.cambiaresearch.com/articles/15/javascript-key-codes
    }

    /**
     *  Fonction appelée lorsqu'une touche du clavier est relâchée
     *  Associée à l'événement "keyUp"
     */
    captureRelacheToucheClavier = function(event) {
  
    }
	collision = function(rect1, rect2) {
        return !(rect1.x+rect1.largeur <= rect2.x ||
                 rect1.x >= rect2.x+rect2.largeur ||
                 rect1.y+rect1.hauteur <= rect2.y ||
                 rect1.y >= rect2.y+rect2.hauteur);
	}
	/************************ Fonctions perso*******************************/

	

    </script>
</head>

<body onload="init()">

    <canvas id="cvs" width="800" height="600" style="margin: 10px auto; border: solid 1px #000;"></canvas>

</body>

</html>
